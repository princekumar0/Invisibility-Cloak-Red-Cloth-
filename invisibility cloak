
# importing the required  libraries


import cv2
import numpy as np
import time


video=cv2.VideoCapture(0,cv2.CAP_DSHOW)             # using webcam

time.sleep(5)                         # giving time to start the webcam

for i in range(70):                     # using loop here to capture the background continuosly

    check,background=video.read()
    background= np.flip(background,axis=1)    # flip background  in order to get original
    while(True):
        check,img=video.read()
        if check==False:
            break
            img=np.flip(img,axis=1)
            imgHSV=cvtColor(img,cv2.COLOR_BGR2HSV)  # converting the image into HSV image
            lower_red=np.array(0,120,50)
            upper_red=np.array(10,255,255)
            mask1=cv2.inRange(imgHSV,lower_red,upper_red)
            lower_red=np.array(170,120,70)
            upper_red=np.array(180,255,255)
            mask2=cv2.inRange(imgHSV,lower_red,upper_red)
            mask1=mask1+mask2

            mask1=cv2.morphologyEx(mask1,cv2.MORPH_OPEN,np.ones((3,3),np.unit8))
            mask1=cv2.morphologyEx(mask1,cv2.MORPH_DILATE,np.ones((3,3),np.unit8))
            mask2=cv2.bitwise_not(mask1)

            res1=cv2.bitwise_and(img,img,mask=mask2)
            res2=cv2.bitwise_and(background,background,mask=mask1)

            final=cv2.addWeighted(res1,1,res2,1,0)
            cv2.imshow("Final",final)
            key=cv2.waitKey(1)

            if key==ord('q'):
                break
                video.release()
                cv2.destroyAllWindows()
